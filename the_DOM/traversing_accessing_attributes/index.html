<!doctype html>
<html lang="en-US">
  <head>
    <title>On the River</title>
  </head>
  <body>
    <h1>On the River</h1>
    <p>A poem by Paul Laurence Dunbar</p>

    <p>
      The sun is low,<br>
      The waters flow,<br>
      My boat is dancing to and fro.<br>
      The eve is still,<br>
      Yet from the hill<br>
      The killdeer echoes loud and shrill.
    </p>
    <p>
      The paddles plash,<br>
      The wavelets dash,<br>
      We see the summer lightning flash;<br>
      While now and then,<br>
      In marsh and fen<br>
      Too muddy for the feet of men,
    </p>
    <p>
      Where neither bird<br>
      Nor beast has stirred,<br>
      The spotted bullfrog's croak is heard.<br>
      The wind is high,<br>
      The grasses sigh,<br>
      The sluggish stream goes sobbing by.
    </p>
    <p>
      And far away<br>
      The dying day<br>
      Has cast its last effulgent ray;<br>
      While on the land<br>
      The shadows stand<br>
      Proclaiming that the eve's at hand.
    </p>

    <script>

      console.log(document.children[0].lastElementChild.firstElementChild.style.color = 'red');

      const walk = function(node, callback) {
        callback(node);
        for (let idx = 0; idx < node.children.length; idx += 1) {
          walk(node.children[idx], callback);
        }
      }

      let pCount = 0;

      const countParagraphs = function(node) {
        let childs = node.children;
        for (let idx = 0; idx < childs.length; idx += 1) {
          if (childs[idx].tagName === 'P') {
            pCount += 1;
          }
        }
      }

      const checkParagraph = function(node) {
        if (node.tagName === 'P') {
          pCount += 1;
        }
      }
      
      walk(document, checkParagraph);
      console.log(pCount);

      // Q3
      let firstWords = [];

      const getFirstWord = function(string) {
        const rgx = /\S+/;
        return string.match(rgx)[0];
      }

      const appendFirstWord = function(node) {
        if (node.tagName === 'P') {
          firstWords.push(getFirstWord(node.textContent));
        }
      }

      walk(document, appendFirstWord);
      console.log(firstWords);

      //Q4
      let first = true;
      walk(document, node => {
        if (node.tagName === 'P') {
          if (first) {
            first = false;
          } else {
            node.classList.add('stanza');
          }
        }
      });

    </script>
  </body>
</html>
